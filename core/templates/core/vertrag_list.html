{% extends "core/base.html" %}

{% block content %}
<h2>Vertragsübersicht</h2>
<a href="{% url 'vertrag_create' %}">Neuen Vertrag hinzufügen</a>
<table border="1">
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Betrag</th>
        <th>Ablaufdatum</th>
        <th>Intervall</th>
        <th>Konto</th>
        <th>Kategorie</th>
        <th>Aktionen</th>
    </tr>
    {% for vertrag in vertraege %}
    <tr>
        <td>{{ vertrag.vertragsnummer }}</td>  <!-- Vertragsnummer statt vertrag.id -->
        <td>{{ vertrag.name }}</td>
        <td>{{ vertrag.betrag }} €</td>
        <td>{{ vertrag.ablaufdatum }}</td>
        <td>{{ vertrag.intervall }}</td>
        <td>{{ vertrag.konto.name }}</td>  <!-- Konto anzeigen -->
        <td>{{ vertrag.kategorie.kategoriebezeichnung }}</td>  <!-- Kategorie anzeigen -->
        <td>
            <a href="{% url 'vertrag_update' vertrag.vertragsnummer %}">Bearbeiten</a>
            <a href="{% url 'vertrag_delete' vertrag.vertragsnummer %}">Löschen</a>
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="8">Keine Verträge vorhanden.</td>
    </tr>
    {% endfor %}
</table>
{% endblock %}